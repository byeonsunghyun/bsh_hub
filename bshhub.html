<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" sizes="32x32" href="./image/hub_logo.png" />
  <title>SungHyun's Project Hub</title>
  <style>
    :root {
      --bg-color: #f9f9f9;
      --text-color: #222;
      --card-bg: #fff;
    }
    body.dark {
      --bg-color: #121212;
      --text-color: #f0f0f0;
      --card-bg: #1e1e1e;
    }
    * {
      box-sizing: border-box;
      transition: all 0.3s ease;
    }
    html, body {
      height: 100%;
      margin: 0; padding: 0;
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      display: flex;
      flex-direction: column;
      font-family: 'Orbitron', sans-serif;
      user-select: none; /* 드래그 시 선택 안 되도록 */
      overflow-x: hidden; /* 수평 스크롤 안 생기게 */
    }
    header {
      padding: 20px;
      text-align: center;
      position: relative;
      border-bottom: 1px solid #ccc;
    }
    header h1 {
      font-size: 2em;
      margin: 0;
    }
    #darkToggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: 2px solid var(--text-color);
      color: var(--text-color);
      padding: 6px 12px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9em;
    }
    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      overflow: hidden;
    }
    .slider-wrapper {
      width: 100%;
      max-width: 1120px;
      overflow: hidden;
      cursor: grab;
      user-select: none;
      position: relative;
      padding: 10px 0;
    }
    .slider-container {
      display: grid;
      grid-auto-flow: column;
      grid-template-rows: repeat(2, auto);
      gap: 20px;
      width: max-content;
      transition: none; /* 트랜지션은 직접 JS에서 토글 */
    }
    a.card {
      background: var(--card-bg);
      border: 1px solid #ccc;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
      width: 280px;
      display: flex;
      flex-direction: column;
      padding: 16px;
      text-align: center;
      text-decoration: none;
      color: inherit;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      user-select: none;
    }
    a.card:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      cursor: pointer;
    }
    .card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 12px;
    }
    .card h2 {
      margin: 10px 0 6px;
      font-size: 1.2em;
    }
    .card p {
      font-size: 0.9em;
      color: var(--text-color);
    }
    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9em;
      background: transparent;
      color: var(--text-color);
      border-top: 1px solid #ccc;
    }
    @media (max-width: 768px) {
      .slider-container {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        width: 100%;
      }
      a.card {
        width: 90%;
        margin-bottom: 16px;
      }
      .card img {
        height: 160px;
      }
      header h1 {
        font-size: 1.0em;
        margin-top: 6px;
      }
      #darkToggle {
        padding: 6px 12px;
        font-size: 14px;
      }
      .slider-wrapper {
        overflow-x: visible;
        cursor: auto;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>SungHyun's Project Hub 🔗</h1>
    <button id="darkToggle">🌙 다크모드</button>
  </header>

  <main>
    <div class="slider-wrapper" id="slider">
      <div class="slider-container" id="sliderContainer">
        <!-- 원본 카드 -->
        <a class="card" href="https://byeonsunghyun.github.io/bsh_travel/main">
          <img src="./image/travel.jpg" alt="BSH's Travel" />
          <h2>✈️ BSH's Travel</h2>
          <p>나만의 여행 기록을 간편하게 남기는 공간입니다.</p>
        </a>
        <a class="card" href="https://byeonsunghyun.github.io/bsh_cooking/cooking_main">
          <img src="./image/food.jpg" alt="뭉치의 요리 레시피" />
          <h2>🍳 뭉치의 요리 레시피</h2>
          <p>쉽고 맛있는 요리법을 모은 레시피 모음입니다.</p>
        </a>
        <a class="card" href="https://byeonsunghyun.github.io/EasyFee_Calc/main">
          <img src="./image/calc.jpg" alt="수수료 계산기" />
          <h2>🔢 수수료 계산기</h2>
          <p>빠르고 정확한 수수료 계산기입니다.</p>
        </a>
        <a class="card" href="https://byeonsunghyun.github.io/devtest/devtest">
          <img src="./image/dev.jpg" alt="개발 연습장" />
          <h2>💻 개발 연습장</h2>
          <p>간단한 프로그램 개발 연습 공간입니다.</p>
        </a>
      </div>
    </div>
  </main>

  <footer>
    © 2025 Byeon Sung Hyun. All rights reserved.
  </footer>

  <script>
    // 다크모드 기능
    const toggleBtn = document.getElementById('darkToggle');
    function loadDarkMode() {
      return localStorage.getItem('darkMode') === 'true';
    }
    function saveDarkMode(isDark) {
      localStorage.setItem('darkMode', isDark);
    }
    function applyDarkMode(isDark) {
      document.body.classList.toggle('dark', isDark);
    }
    function updateToggleText() {
      const isDark = document.body.classList.contains('dark');
      toggleBtn.textContent = window.innerWidth <= 600
        ? (isDark ? '☀️' : '🌙')
        : (isDark ? '☀️ 라이트모드' : '🌙 다크모드');
    }
    toggleBtn.addEventListener('click', () => {
      const isDark = document.body.classList.toggle('dark');
      saveDarkMode(isDark);
      updateToggleText();
    });
    window.addEventListener('DOMContentLoaded', () => {
      applyDarkMode(loadDarkMode());
      updateToggleText();
    });
    window.addEventListener('resize', updateToggleText);

    // 슬라이더 무한 루프 기능
    const sliderWrapper = document.getElementById('slider');
    const sliderContainer = document.getElementById('sliderContainer');

    let isDown = false,
        startX,
        scrollLeft;

    // 카드 원본 배열
    const cards = Array.from(sliderContainer.children).slice(0,4);

    // 앞뒤 카드 복제 (무한 루프 효과)
    const cloneCount = cards.length; // 복제할 카드 수(전체 원본 다 복제)
    // 앞에 뒤쪽 카드들 복제
    for(let i = cards.length - cloneCount; i < cards.length; i++) {
      const clone = cards[i].cloneNode(true);
      sliderContainer.insertBefore(clone, sliderContainer.firstChild);
    }
    // 뒤에 앞쪽 카드들 복제
    for(let i = 0; i < cloneCount; i++) {
      const clone = cards[i].cloneNode(true);
      sliderContainer.appendChild(clone);
    }

    // 복제 후 모든 카드 다시 셋팅
    const allCards = Array.from(sliderContainer.children);

    // 카드 + gap 너비 계산
    const cardWidth = cards[0].offsetWidth;
    const gap = 20; // CSS grid gap과 동일하게 하드코딩

    // 초기 위치: 복제된 앞부분 만큼 스크롤 위치 세팅
    const startScroll = (cardWidth + gap) * cloneCount;
    sliderWrapper.scrollLeft = startScroll;

    // 트랜지션 제어용 플래그
    let isTransitioning = false;

    // 드래그 이벤트 (마우스)
    sliderWrapper.addEventListener('mousedown', e => {
      isDown = true;
      sliderWrapper.style.cursor = 'grabbing';
      startX = e.pageX - sliderWrapper.offsetLeft;
      scrollLeft = sliderWrapper.scrollLeft;
    });
    sliderWrapper.addEventListener('mouseleave', e => {
      isDown = false;
      sliderWrapper.style.cursor = 'grab';
    });
    sliderWrapper.addEventListener('mouseup', e => {
      isDown = false;
      sliderWrapper.style.cursor = 'grab';
    });
    sliderWrapper.addEventListener('mousemove', e => {
      if(!isDown) return;
      e.preventDefault();
      const x = e.pageX - sliderWrapper.offsetLeft;
      const walk = (x - startX) * 1.5;
      sliderWrapper.scrollLeft = scrollLeft - walk;
    });

    // 드래그 이벤트 (터치)
    sliderWrapper.addEventListener('touchstart', e => {
      isDown = true;
      startX = e.touches[0].pageX - sliderWrapper.offsetLeft;
      scrollLeft = sliderWrapper.scrollLeft;
    });
    sliderWrapper.addEventListener('touchend', e => {
      isDown = false;
    });
    sliderWrapper.addEventListener('touchmove', e => {
      if(!isDown) return;
      const x = e.touches[0].pageX - sliderWrapper.offsetLeft;
      const walk = (x - startX) * 1.5;
      sliderWrapper.scrollLeft = scrollLeft - walk;
    });

    // 자동 슬라이드 (무한 루프)
    let speed = 0.5; // px per frame
    let rafId;

    function step() {
      if (!isDown) {
        sliderWrapper.scrollLeft += speed;

        // 끝에서 끝으로 자연스럽게 연결
        if (sliderWrapper.scrollLeft >= sliderContainer.scrollWidth - sliderWrapper.clientWidth) {
          // 트랜지션 끄고 즉시 위치 점프
          isTransitioning = true;
          sliderWrapper.style.scrollBehavior = 'auto';
          sliderWrapper.scrollLeft = startScroll;
          // 트랜지션 다시 켜기
          setTimeout(() => {
            sliderWrapper.style.scrollBehavior = 'smooth';
            isTransitioning = false;
          }, 50);
        }
        else if (sliderWrapper.scrollLeft <= 0) {
          isTransitioning = true;
          sliderWrapper.style.scrollBehavior = 'auto';
          sliderWrapper.scrollLeft = sliderContainer.scrollWidth - sliderWrapper.clientWidth - startScroll;
          setTimeout(() => {
            sliderWrapper.style.scrollBehavior = 'smooth';
            isTransitioning = false;
          }, 50);
        }
      }
      rafId = requestAnimationFrame(step);
    }
    rafId = requestAnimationFrame(step);
  </script>
</body>
</html>
